#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
# 
#   http://www.apache.org/licenses/LICENSE-2.0
# 
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#


#! /bin/bash


# NOTE: the following environment variable is a serving suggestion.
#       Alter as necessary for your system.


export PROTON_INSTALL_ROOT=${HOME}/latest/install/p


PROJECT=c_proactor_client
echo Making $PROJECT =================================================

FLAGS="-g -fpermissive"
DEFS=
OPTO=-O3

for file in *.c
do
  echo compiling $file --------------------------------------------
  g++                           \
    $FLAGS                      \
    $DEFS                       \
    $OPTO                       \
    -I${PROTON_INSTALL_ROOT}/include \
    -c                          \
    $file
done

echo Linking ====================================================

g++                           \
  -o $PROJECT                 \
  -L${PROTON_INSTALL_ROOT}/lib64 \
  $PROJECT.o                  \
  -lqpid-proton               \
  -lpthread

rm *.o

echo -e "Done ================================\n\n\n\n"

